---
title: "TRANSFER - Saques Confirmados"
description: "Webhook para saques PIX confirmados e liquidados"
---

# TRANSFER - Saques Confirmados

O webhook **TRANSFER** é enviado quando um saque PIX é confirmado e liquidado com sucesso.

## Quando é Enviado

- Saque PIX processado com sucesso
- Transferência confirmada pelo banco
- Valor debitado da sua conta
- Transação liquidada no sistema PIX

## Payload do Webhook

<ResponseExample>
```json
{
  "type": "TRANSFER",
  "data": {
    "id": "id_pixout",
    "txId": "txtId_da_transferencia",
    "pixKey": "chave_pix_destino",
    "status": "LIQUIDATED",
    "payment": {
      "amount": "50.00",
      "currency": "BRL"
    },
    "endToEndId": "E12345678202501191045XYZ789",
    "createdAt": "2025-01-19T10:45:00.000Z",
    "webhookType": "TRANSFER",
    "location": "pix",
    "externalId": "external_id_saque",
    "creditorAccount": {
      "name": "Nome do Destinatário",
      "document": "98765432100",
      "accountType": "CACC"
    },
    "checksum": "hash_checksum"
  }
}
```
</ResponseExample>

## Campos do Payload

<ParamField body="id" type="string">
  ID único do saque na braix
</ParamField>

<ParamField body="txId" type="string">
  ID da transação no sistema PIX
</ParamField>

<ParamField body="pixKey" type="string">
  Chave PIX de destino do saque
</ParamField>

<ParamField body="status" type="string">
  Status da transação (sempre "LIQUIDATED" para TRANSFER)
</ParamField>

<ParamField body="payment.amount" type="string">
  Valor do saque em formato decimal
</ParamField>

<ParamField body="payment.currency" type="string">
  Moeda do saque (sempre "BRL")
</ParamField>

<ParamField body="endToEndId" type="string">
  ID end-to-end da transação PIX
</ParamField>

<ParamField body="createdAt" type="string">
  Data e hora da confirmação em ISO 8601
</ParamField>

<ParamField body="webhookType" type="string">
  Tipo do webhook (sempre "TRANSFER")
</ParamField>

<ParamField body="location" type="string">
  Localização da transação (sempre "pix")
</ParamField>

<ParamField body="externalId" type="string">
  ID externo fornecido na criação do saque
</ParamField>

<ParamField body="creditorAccount.name" type="string">
  Nome do destinatário
</ParamField>

<ParamField body="creditorAccount.document" type="string">
  CPF/CNPJ do destinatário
</ParamField>

<ParamField body="creditorAccount.accountType" type="string">
  Tipo da conta (sempre "CACC" para conta corrente)
</ParamField>

<ParamField body="checksum" type="string">
  Hash de verificação da transação
</ParamField>

## Implementação

### Exemplo em Node.js

```javascript
const express = require('express');
const app = express();

app.use(express.json());

app.post('/webhooks/braix', (req, res) => {
  const { type, data } = req.body;
  
  if (type === 'TRANSFER') {
    handleTransferWebhook(data);
  }
  
  res.status(200).json({ received: true });
});

function handleTransferWebhook(data) {
  console.log('Saque confirmado:', {
    id: data.id,
    amount: data.payment.amount,
    currency: data.payment.currency,
    recipient: data.creditorAccount.name,
    pixKey: data.pixKey,
    externalId: data.externalId,
    endToEndId: data.endToEndId
  });
  
  // Aqui você pode:
  // - Atualizar saldo do usuário
  // - Enviar notificação de confirmação
  // - Atualizar status da transação
  // - Processar comissões
  // - Etc.
}

app.listen(3000, () => {
  console.log('Webhook server running on port 3000');
});
```

### Exemplo em Python

```python
from flask import Flask, request, jsonify
import json

app = Flask(__name__)

@app.route('/webhooks/braix', methods=['POST'])
def handle_webhook():
    data = request.get_json()
    
    if data.get('type') == 'TRANSFER':
        handle_transfer_webhook(data.get('data'))
    
    return jsonify({'received': True}), 200

def handle_transfer_webhook(data):
    print(f"Saque confirmado: {json.dumps(data, indent=2)}")
    
    # Aqui você pode:
    # - Atualizar saldo do usuário
    # - Enviar notificação de confirmação
    # - Atualizar status da transação
    # - Processar comissões
    # - Etc.

if __name__ == '__main__':
    app.run(port=3000)
```

## Casos de Uso Comuns

### 1. Atualizar Saldo do Usuário

```javascript
async function handleTransferWebhook(data) {
  const userId = data.externalId; // Assumindo que externalId é o ID do usuário
  const amount = parseFloat(data.payment.amount);
  
  // Debitar valor do saldo do usuário
  await updateUserBalance(userId, -amount);
  
  console.log(`Saldo atualizado: -R$ ${amount} para usuário ${userId}`);
}
```

### 2. Enviar Notificação de Confirmação

```javascript
async function handleTransferWebhook(data) {
  const amount = data.payment.amount;
  const recipient = data.creditorAccount.name;
  const pixKey = data.pixKey;
  
  // Enviar email de confirmação
  await sendEmail({
    to: 'user@example.com',
    subject: 'Saque Confirmado',
    body: `Seu saque de R$ ${amount} para ${recipient} (${pixKey}) foi confirmado!`
  });
  
  // Enviar SMS
  await sendSMS({
    to: '+5511999999999',
    message: `Saque de R$ ${amount} confirmado!`
  });
}
```

### 3. Atualizar Status da Transação

```javascript
async function handleTransferWebhook(data) {
  const transactionId = data.id;
  const status = 'COMPLETED';
  
  // Atualizar status no banco de dados
  await updateTransactionStatus(transactionId, status);
  
  // Registrar histórico
  await logTransactionEvent({
    transactionId,
    event: 'TRANSFER_CONFIRMED',
    timestamp: new Date(),
    details: data
  });
  
  console.log(`Transação ${transactionId} marcada como ${status}`);
}
```

### 4. Processar Comissões

```javascript
async function handleTransferWebhook(data) {
  const amount = parseFloat(data.payment.amount);
  const commission = amount * 0.01; // 1% de comissão
  
  // Registrar comissão
  await recordCommission({
    transactionId: data.id,
    amount: commission,
    type: 'TRANSFER'
  });
  
  console.log(`Comissão registrada: R$ ${commission}`);
}
```

## Validação de Segurança

Sempre valide o checksum para garantir a autenticidade:

```javascript
const crypto = require('crypto');

function verifyChecksum(data, receivedChecksum) {
  // O checksum deve ser o mesmo retornado na requisição de criação do saque
  const expectedChecksum = crypto
    .createHash('sha256')
    .update(JSON.stringify(data))
    .digest('hex');
  
  return crypto.timingSafeEqual(
    Buffer.from(receivedChecksum),
    Buffer.from(expectedChecksum)
  );
}

function handleTransferWebhook(data) {
  if (!verifyChecksum(data, data.checksum)) {
    console.error('Checksum inválido');
    return;
  }
  
  // Processar webhook com segurança
  processTransfer(data);
}
```

## Diferença entre TRANSFER e CASHOUT

<CardGroup cols={2}>
<Card title="TRANSFER" icon="check">
  **Sucesso**: Saque processado e confirmado
  - Status: LIQUIDATED
  - Valor debitado da conta
  - Transação finalizada
</Card>

<Card title="CASHOUT" icon="x">
  **Falha**: Saque rejeitado ou cancelado
  - Status: REJECTED/CANCELLED
  - Valor não debitado
  - Transação cancelada
</Card>
</CardGroup>

## Troubleshooting

### Problemas Comuns

<AccordionGroup>
<Accordion title="Webhook não recebido">
  - Verifique se a URL está configurada corretamente no dashboard
  - Confirme se o endpoint está retornando status 200
  - Verifique os logs de retry no dashboard
</Accordion>

<Accordion title="Checksum inválido">
  - Confirme se está usando o mesmo secret da requisição original
  - Verifique se o payload não foi modificado antes da verificação
  - Compare com o checksum retornado na criação do saque
</Accordion>

<Accordion title="Processamento duplicado">
  - Implemente verificação de idempotência usando o campo `id`
  - Armazene IDs processados para evitar duplicatas
  - Use transações de banco de dados para operações atômicas
</Accordion>
</AccordionGroup>

## Próximos Passos

- [RECEIVE - Pagamentos Recebidos](/webhooks/receive)
- [CASHOUT - Saques Rejeitados](/webhooks/cashout)
- [REFUND - Estornos](/webhooks/refund)
- [INFRACTION - Infrações PIX](/webhooks/infraction)
