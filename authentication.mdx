---
title: "Authentication"
description: "Learn how to authenticate with braix API using OAuth 2.0 client credentials flow"
---

# Authentication

braix API uses OAuth 2.0 client credentials flow for secure access to all endpoints. This guide explains how to authenticate your requests and manage your API credentials.

## Client Credentials

Your client credentials (client ID and client secret) are used to obtain access tokens. You can find your credentials in the [braix Dashboard](https://dashboard.braix.com.br) under the "API Keys" section.

<Info>
Client credentials are sensitive. Keep them secure and never expose them in client-side code or public repositories.
</Info>

## Authentication Methods

### OAuth 2.0 Client Credentials Flow

To authenticate with braix API, you need to:

1. **Obtain an access token** by making a POST request to `/auth/token` with Basic Auth
2. **Use the access token** in subsequent API requests as a Bearer token

#### Step 1: Get Access Token

Make a POST request to `/auth/token` with Basic Authentication using your client credentials:

```bash
Authorization: Basic base64(clientId:clientSecret)
```

<CodeGroup>
```javascript JavaScript
const axios = require('axios');
const crypto = require('crypto');

// Step 1: Get access token
const getAccessToken = async () => {
  const clientId = process.env.braix_CLIENT_ID;
  const clientSecret = process.env.braix_CLIENT_SECRET;
  const credentials = Buffer.from(`${clientId}:${clientSecret}`).toString('base64');
  
  const response = await axios.post('https://api.braix.com/auth/token', {}, {
    headers: {
      'Authorization': `Basic ${credentials}`,
      'Content-Type': 'application/json'
    }
  });
  
  return response.data.access_token;
};

// Step 2: Use access token for API calls
const apiClient = axios.create({
  baseURL: 'https://api.braix.com',
  headers: {
    'Content-Type': 'application/json'
  }
});

// Add token to requests
apiClient.interceptors.request.use(async (config) => {
  const token = await getAccessToken();
  config.headers.Authorization = `Bearer ${token}`;
  return config;
});
```

```python Python
import requests
import base64
import os

def get_access_token():
    client_id = os.getenv('braix_CLIENT_ID')
    client_secret = os.getenv('braix_CLIENT_SECRET')
    credentials = base64.b64encode(f"{client_id}:{client_secret}".encode()).decode()
    
    response = requests.post('https://api.braix.com/auth/token', 
                           headers={'Authorization': f'Basic {credentials}'})
    return response.json()['access_token']

# Use the token for API calls
token = get_access_token()
headers = {
    'Authorization': f'Bearer {token}',
    'Content-Type': 'application/json'
}
response = requests.get('https://api.braix.com/transactions', headers=headers)
```

```php PHP
<?php
function getAccessToken() {
    $clientId = $_ENV['braix_CLIENT_ID'];
    $clientSecret = $_ENV['braix_CLIENT_SECRET'];
    $credentials = base64_encode($clientId . ':' . $clientSecret);
    
    $context = stream_context_create([
        'http' => [
            'header' => [
                'Authorization: Basic ' . $credentials,
                'Content-Type: application/json'
            ],
            'method' => 'POST'
        ]
    ]);
    
    $response = file_get_contents('https://api.braix.com/auth/token', false, $context);
    $data = json_decode($response, true);
    return $data['access_token'];
}

$token = getAccessToken();
$headers = [
    'Authorization: Bearer ' . $token,
    'Content-Type: application/json'
];
?>
```

```curl cURL
# Step 1: Get access token
curl -X POST "https://api.braix.com/auth/token" \
  -H "Authorization: Basic $(echo -n 'clientId:clientSecret' | base64)" \
  -H "Content-Type: application/json"

# Step 2: Use the token for API calls
curl -X GET "https://api.braix.com/transactions" \
  -H "Authorization: Bearer your_access_token_here" \
  -H "Content-Type: application/json"
```
</CodeGroup>

## Client Credentials Management

### Creating Client Credentials

1. Log in to your [braix Dashboard](https://dashboard.braix.com.br)
2. Navigate to "Settings" → "API Keys"
3. Click "Create New Client"
4. Give your client a descriptive name
5. Select the appropriate permissions
6. Copy and securely store your client ID and client secret

<Warning>
Client secrets are only shown once when created. Make sure to copy and store them securely.
</Warning>

### Key Permissions

API keys can have different permission levels:

<AccordionGroup>
<Accordion title="Read Only">
  - View transactions
  - Check payment status
  - Access statistics
  - Read webhook history
</Accordion>

<Accordion title="Read/Write">
  - All read permissions
  - Create payments
  - Generate QR codes
  - Process refunds
  - Manage webhooks
</Accordion>

<Accordion title="Admin">
  - All read/write permissions
  - Manage API keys
  - Access system settings
  - View audit logs
</Accordion>
</AccordionGroup>

### Rotating API Keys

For security best practices, rotate your API keys regularly:

<Steps>
<Step title="Create New Key">
  Generate a new API key with the same permissions as your current key.
</Step>

<Step title="Update Applications">
  Update all applications and services to use the new API key.
</Step>

<Step title="Test Integration">
  Verify that all functionality works with the new key.
</Step>

<Step title="Revoke Old Key">
  Once confirmed working, revoke the old API key.
</Step>
</Steps>

## Security Best Practices

### Environment Variables

Store your client credentials in environment variables, never in code:

```bash .env
braix_CLIENT_ID=your_client_id_here
braix_CLIENT_SECRET=your_client_secret_here
braix_BASE_URL=https://api.braix.com
```

### IP Whitelisting

For additional security, you can whitelist specific IP addresses:

1. Go to "Settings" → "Security"
2. Add your server IP addresses
3. Enable IP whitelisting for your API key

<Info>
IP whitelisting is optional but recommended for production environments.
</Info>

### Request Signing

For high-security applications, you can implement request signing:

```javascript
const crypto = require('crypto');

const signRequest = (method, path, body, timestamp, apiSecret) => {
  const message = `${method}${path}${body}${timestamp}`;
  return crypto
    .createHmac('sha256', apiSecret)
    .update(message)
    .digest('hex');
};
```

## Error Handling

### Authentication Errors

<ResponseField name="401 Unauthorized" type="object">
  Returned when the API key is missing, invalid, or expired.

  <Expandable title="Error Response">
    ```json
    {
      "success": false,
      "message": "Unauthorized",
      "error": "Invalid API key"
    }
    ```
  </Expandable>
</ResponseField>

<ResponseField name="403 Forbidden" type="object">
  Returned when the API key doesn't have permission for the requested operation.

  <Expandable title="Error Response">
    ```json
    {
      "success": false,
      "message": "Forbidden",
      "error": "Insufficient permissions"
    }
    ```
  </Expandable>
</ResponseField>

### Rate Limiting

API requests are rate limited to prevent abuse:

- **Standard**: 100 requests per 15 minutes
- **Premium**: 1000 requests per 15 minutes
- **Enterprise**: Custom limits

<ResponseField name="429 Too Many Requests" type="object">
  Returned when rate limits are exceeded.

  <Expandable title="Error Response">
    ```json
    {
      "success": false,
      "message": "Too many requests",
      "retryAfter": 900
    }
    ```
  </Expandable>
</ResponseField>

## Testing Authentication

You can test your authentication by first obtaining an access token and then making a request to the health endpoint:

<RequestExample>
```bash cURL
# Step 1: Get access token
curl -X POST "https://api.braix.com/auth/token" \
  -H "Authorization: Basic $(echo -n 'clientId:clientSecret' | base64)" \
  -H "Content-Type: application/json"

# Step 2: Test with health endpoint
curl -X GET "https://api.braix.com/health" \
  -H "Authorization: Bearer your_access_token_here"
```
</RequestExample>

<ResponseExample>
```json Token Response
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600
}
```

```json Health Response
{
  "status": "ok",
  "timestamp": "2024-01-15T10:30:00Z",
  "version": "1.0.0"
}
```
</ResponseExample>

## Troubleshooting

<AccordionGroup>
<Accordion title="Invalid Client Credentials">
  - Verify the client ID and client secret are correct
  - Check for extra spaces or characters in credentials
  - Ensure you're using the correct environment (sandbox vs production)
  - Verify the base64 encoding of credentials is correct
</Accordion>

<Accordion title="Token Expired">
  - Access tokens expire after a certain time (usually 1 hour)
  - Implement token refresh logic in your application
  - Store token expiration time and refresh before expiry
</Accordion>

<Accordion title="Permission Denied">
  - Verify your client credentials have the required permissions
  - Check if the endpoint requires specific access levels
  - Contact support if you need permission upgrades
</Accordion>

<Accordion title="Rate Limit Exceeded">
  - Implement exponential backoff in your retry logic
  - Consider upgrading to a higher rate limit plan
  - Cache access tokens when possible to reduce auth requests
</Accordion>
</AccordionGroup>
